<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../../assets/css/reset.css">
    <link rel="stylesheet" href="../../assets/css/dashboard/navbar.css">
    <link rel="stylesheet" href="../../assets/css/dashboard/dashboard.css">
    <link rel="stylesheet" href="../../assets/css/dashboard/totem.css">
    <link rel="shortcut icon" href="../../assets/SVG/logo.svg" type="image/x-icon">

    <title>Airplane Solutions - Totem</title>
</head>
<body onload="getTotensForModal(), setInfosTotemIndividual(), setInfosRam(), setInfosDisco(), setInfosCpu()">
    <dialog id="dialog"></dialog>
    <nav id="navbar"></nav>
    
    <div class="divInformationTotem">
        <div class="divTitleInformation">
            <h2>Totem <span id="idTotemInformation">X</span></h2>
            <div class="divPoints">
                <div></div>
                <div></div>
                <div></div>
            </div>
        </div>
        <div class="divDataTotem">
            <div class="divData line">
                <span>Estado</span>
                <h3>Ativo</h3>
            </div>
            <div class="divData line" id="divProcessadorInformation">
                <span>Processador</span>
                <h3>XPTO</h3>
            </div>
            <div class="divData line">
                <span>Sistema Operacional</span>
                <span id="divSoInformation">
                    <h3>Linux</h3>
                </span>
            </div>
            <div class="divData line" id="divRamInformation">
                <span>Total RAM</span>
                <h3>16gb</h3>
            </div>
            <div class="divData line" id="divDiscoInformation">
                <span>Total Disco</span>
                <h3>128gb</h3>
            </div>
            <div class="divData">
                <span>IPv4</span>
                <h3>00.000.000.00</h3>
            </div>
        </div>

        <div class="divDataTokem">
            <div class="divTokemInformation">
                <span>Token</span>
                <img src="../../assets/SVG/icons/copy.svg" id="imgCopyToken">
            </div>
            <div class="divNumberToken" id="divNumberToken">
                <span>A</span>
                <span>0</span>
                <span>0</span>
                <span>2</span>
            </div>


        </div>
    </div>
    <div class="divContent">
        <div class="divTop">
            <h2>Totem</h2>
            <div class="divAtualizarAutomaticamente">
                <p>Atualizar informações do hardware automaticamente</p>
                <label class="switch">
                    <input type="checkbox">
                    <span class="slider"></span>
                </label>
            </div>
        </div>
        <div class="divInformationHealthTotem">
            <div class="divTitleHealth">
                <h2>Saúde</h2>

                <div class="divMeters">
                    <div class="divMeter">
                        <div class="green"></div>
                        <span>Legal</span>
                    </div>
                    <div class="divMeter">
                        <div class="yellow"></div>
                        <span>Risco</span>
                    </div>
                    <div class="divMeter">
                        <div class="red"></div>
                        <span>Alerta</span>
                    </div>
                </div>
            </div>

            <div class="divMeterComponentes">
                <span class="spComponente">Componente</span>
                <span class="spStatus">Status</span>

                <div class="divComponente rightLine">
                    <h3>CPU</h3>
                    <div id="divUsoCpu" class="green">
                        <span id="spnUsoCpu">50%</span>
                    </div>
                </div>
                <div class="divComponente rightLine">
                    <h3>Memória</h3>
                    <div id="divUsoRam" class="red">
                        <span id="spnUsoRam">100%</span>
                    </div>
                </div>
                <div class="divComponente rightLine">
                    <h3>Disco</h3>
                    <div id="divUsoDisco" class="yellow">
                        <span id="spnUsoDisco">60%</span>
                    </div>
                </div>
                <div class="divComponente">
                    <h3>Rede</h3>
                    <div class="green">
                        <span>10%</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="divGraphic">
            <h3>% de uso da CPU por hora</h3>
            <div class="divChart">
                <canvas id="chartCpuTotem"></canvas>
            </div>
        </div>

        <div class="divRamDisco">
            <div class="divGraphic graphicRam">
                <h3>Memória RAM</h3>
                <div class="divChart">
                    <canvas id="chartRamTotem"></canvas>
                </div>
            </div>
            <div class="divGraphic graphicDisco">
                <h3>Uso de disco</h3>
                <div class="divChart">
                    <canvas id="chartDiscoTotem"></canvas>
                </div>
            </div>
        </div>
    </div>
    
</body>
</html>
<!-- Imports Javascript -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="../js/dashboard/totemFunc.js"></script>
<script src="../js/dashboard/chartTotem.js"></script>
<script src="../js/dashboard/navbar.js"></script>
<script src="../js/funcoes.js"></script>

<script>
    function setInfosRam() {
        const idCompanhia = sessionStorage.ID_COMPANHIA;
        const idTotem = sessionStorage.ID_TOTEM;
        const usoRam = document.getElementById("spnUsoRam")
        const divUsoRam = document.getElementById("divUsoRam")

        fetch(`/medidas/usoRamAtual/${idTotem}/${idCompanhia}`)
        .then((result) => {
            result.json().then((data) => {
                console.log(data);
                if (data[0].valorEmUso >= 0 && data[0].valorEmUso <= 50) {
                    divUsoRam.className = "green"
                } else if (data[0].valorEmUso > 50 && data[0].valorEmUso < 80) {
                    divUsoRam.className = "yellow"
                } else {
                    divUsoRam.className = "red"
                }
                usoRam.innerText = `${data[0].valorEmUso}%`;
            })
        }).catch((err) => {
            console.log(err);
        })
    }

    function setInfosDisco() {
        const idCompanhia = sessionStorage.ID_COMPANHIA;
        const idTotem = sessionStorage.ID_TOTEM;
        const usoDisco = document.getElementById("spnUsoDisco")
        const divUsoDisco = document.getElementById("divUsoDisco")

        fetch(`/medidas/usoDiscoAtual/${idTotem}/${idCompanhia}`)
        .then((result) => {
            result.json().then((data) => {
                console.log(data);
                if (data[0].valorEmUso >= 0 && data[0].valorEmUso <= 50) {
                    divUsoDisco.className = "green"
                } else if (data[0].valorEmUso > 50 && data[0].valorEmUso < 80) {
                    divUsoDisco.className = "yellow"
                } else {
                    divUsoDisco.className = "red"
                }
                usoDisco.innerText = `${data[0].valorEmUso}%`;
            })
        }).catch((err) => {
            console.log(err);
        })
    }

    function setInfosCpu() {
        const idCompanhia = sessionStorage.ID_COMPANHIA;
        const idTotem = sessionStorage.ID_TOTEM;
        const usoCpu = document.getElementById("spnUsoCpu")
        const divUsoCpu = document.getElementById("divUsoCpu")

        fetch(`/medidas/usoCpuAtual/${idTotem}/${idCompanhia}`)
        .then((result) => {
            result.json().then((data) => {
                console.log(data);
                if (data[0].valorEmUso >= 0 && data[0].valorEmUso <= 50) {
                    divUsoCpu.className = "green"
                } else if (data[0].valorEmUso > 50 && data[0].valorEmUso < 80) {
                    divUsoCpu.className = "yellow"
                } else {
                    divUsoCpu.className = "red"
                }
                usoCpu.innerText = `${data[0].valorEmUso}%`;
            })
        }).catch((err) => {
            console.log(err);
        })
    }
</script>